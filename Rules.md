**游戏规则**

**一、开局与“?”棋子：**

1、除“帅/将”以外的所有棋子最初都以“?”的形式出现，并且根据它在初始布局对应的棋子类型来移动（例如对应“车”则按车的走法、对应“马”则按马的走法等）。

2、若“?”移动到空位，或“?”主动吃掉了任何已翻开的棋子或另一个“?”，在这一步操作完成后，“?”都会立刻翻面，显露其真正的兵种与阵营（红/黑），之后该“?”将按自己真实身份的规则来继续走子或吃子。

**二、已翻面棋子的移动与进攻规则：**

1、**车** (車/俥)：沿横或竖方向走，中途不许有其他棋子阻挡。

2、**马** (馬/傌)：走“日”字形，移动前需要检查“马脚”位置是否被其他棋子占用，若被占用则无法跳过去。

3、**兵/卒：**

3.1 自己阵营内时，只能向前走一格；

3.2 过了“楚河 - 汉界”后，可以选择向前或向左右各走一格。

4、**象 (相/象)：**

4.1 基本规则：只能“一飞”走两步对角（总共走 2 格直、2 格横组成的对角），中途若有棋子阻挡则不能飞。

4.2 扩展规则：在暗棋中，象可以过河，但仍须遵守“飞象”步法和“象眼”不可被堵的限制。

5、**士 (仕/士)：**

5.1 基本规则：只能在己方九宫(3×3 区域)内斜着走一步，对角移动；

5.2 扩展规则：由于暗棋中可能将士/仕随机出现于更广区域，现在士/仕可在全地图走，但每次移动仍必须是“一步对角”，不能纵横直走。

**三、“悔棋”功能与可点击条件：**

1、每次走子或吃子后，若满足以下条件，才会记录本次动作为“可撤销”的一步：

1.1 移动/攻击一方的棋子已经翻面（revealed），且目标格的棋子（如果有）也已经翻面。

1.2 该棋子此前至少已进行过一次移动（即不是第一步就想悔）。

1.3 游戏尚未结束（没有任何一方的“帅/将”被吃掉）。

2、在界面上，“红方悔棋”或“黑方悔棋”按钮只有在“对手刚刚走了一步且该步满足上面记录条件”并且“当前对局未结束”时才会变为可点状态；否则按钮会置灰不可点。

3、当符合条件时，点击“悔棋”会将对手的上一步完全还原，包括棋盘状态、被吃掉的棋子、双方的步数统计等，随后切换回由被悔棋方继续下子。